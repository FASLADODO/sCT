\section{Forsøgsplan}

For at validere testresultaterne vil vi benytte os af joint histograms. For hvert sCT vi generer har vi det korrekte CT. Ved at plotte sCT værdier som x koordinaten og CT værdier som y koordinaten får vi en visuel repræsentation af ligheden mellem billederne. Hvis resultatet er identisk vil der optræde en enkelt lige linje fra (0,0) til (max,max). Jo mere forskellige de er jo længere fra den lige linje ligger punkterne.

Fordelen ved denne metode er at vi nemt kan aflæse hvilke værdier vi har de største problemer med. Hvis vi har meget stor afvigelse i knoglerne vil vi få en stor klump omkring nul, mens der kan være store ligheder i det bløde væv der så giver en pæn linje omkring minus 500.

Derudover er det samme valideringsmetode der bruges af Johannson et al., og vi vil derfor kunne sammenligne vores værdier med deres.

For at finde ud af om vores sCT er godt nok til attenuationskorrektion af PET billeder vil vi generere PET billeder med vores sCT og det rigtige CT. Vi kan herefter konstruere et nyt billede, der er baseret på den procentvise forskel imellem PET/CT og PET/sCT. 

Ud fra procentsforskelsbilledet kan vi se hvilke regioner der er forskellige fra PET/CT billedet, og giver samtidigt et godt overblik over hvor godt vores PET/sCT billede er blevet.

Begge disse valideringsmetoder er objektive men skal evalueres manuelt. Vi har ikke en metode til at give et enkelt tal for hvor godt vores PET/sCT billede er blevet. Vi forventer også at kvaliteten af sCT billedet, og dermed også PET/sCT billedet vil variere meget.


Da flere af FullCT billederne er lavet uden en perfekt maske, som skjuler hovedholder og nakkestøtten på CT billedet, har vi valgt at generere nye FullCT baseret på CT billeder påført vores maske. Da støj rundt omkring hovedet påvirker attenuation korrektionen fik vi billeder med meget stor afvigelse imod den bagerste del af kraniet. Da vi er sikre på at både sCT og CT billederne er påført samme maske, er der større sandsynlighed for at vi sammenligner vores algoritme frem for støj. Der kan dog stadig fremkomme små rester af hovedstøtten tæt på kraniet, men det ser ikke ud til at være et problem.

\todo{tekst, beskriv joint histogram, omdøb "faldgrupper"}

\subsection{Leave-one-out cross validation (LOOCV)}
\subsubsection{Fremgangsmåde}
Leave-one-out cross validation (LOOCV) er en gængs metode der bruges til at teste korrektheden af en algoritme. I alt sin enkelthed går metoden ud på at vi udvælger fem patienter. Fra de fem patienter lægger vi en patient til side, fx. den første patient, og træner algoritmen på de resterende fire patienter. Derefter udregner vi et sCT for den første patient. Vi gør herefter det samme igen, men udelader patient nummer to, træner på de resterende fire og udregner nummer to's sCT. 

Ved at rotere træningssættet får vi testet metoden med data fra forskellige patienter, og vi får en basis for at sammenligne sCT'et.


\subsubsection{Forventning}
Vi forventer at vores joint histograms bliver dårligere end Johannsons's, da vores hidtidige sCT er visuelt dårligere end deres.


\subsubsection{Faldgrupper}
For at opnå stabile resultater er vi nødt til at filtrere patienter med artifakter fra. Da artifakter repræsentere områder med manglende data, tror vi det er nødvendigt for kvaliteten af vores algoritme, at de bliver sorteret fra.

\subsubsection{Resultat}

Ud fra procent difference (PD) billederne kan vi se at algoritmen levere nogenlunde stabile resultater. Men vi kan også se at der er store problemer ved ventriklerne, hvor den procentvise forskel på flere af billederne sniger sig op over de ti procent.

Hvis vi ser på et PD billede lagt over et MR billede er det tydeligt at jo tættere på hjerneskallen vi kommer, jo større bliver afvigelsen.

Det er ikke muligt for os at evaluere korrektheden af algoritmen omkring mund og næse regionen da langt de fleste T2 sekvenser ikke indeholder data så langt nede. Ligeså er der problemer i toppen af kraniet da T2 sekvenserne også mangler en skive eller to, og derfor ikke har hele hjerneskallen med.

I gennemsnit er der lidt under ti procent afvigelse i selve hjerne. Det 


\todo{Udfør LOOCV-forsøget}

\subsection{Udregn sCT til hjerner med artifakter trænet på hjerner uden artifakter}
\subsubsection{Fremgangsmåde}
Træn på n hjerner test på m.

\subsubsection{Forventning}

\subsubsection{Faldgrupper}

\subsubsection{Resultat}

\subsection{Udregn sCT til hjerner trænet på hjerner med artifakter}
\subsubsection{Fremgangsmåde}
Iterativt træn på et antal hjerner og introducer hjerner med artifakter.
Sammenlign kvaliteten af sCT afhængigt af andelen af hjerner, som har
artifakter.

\subsubsection{Forventning}
At sCT's kvalitet forværres for hvert introduceret hjerne med artifakt.

\subsubsection{Faldgrupper}

\subsubsection{Resultat}


\subsection{Over tid}
\subsubsection{Fremgangsmåde}
Træn på gamle hjerner, test på ny hjerner. Og omvendt.

\subsubsection{Forventning}
Forventningen er sCT af samme kvalitet, som dem ved LOOCV-forsøget.

\subsubsection{Faldgrupper}


\subsubsection{Resultat}

\subsection{Test på en masse}
\subsubsection{Fremgangsmåde}
Iterativt træn på n+1 hjerner

\subsubsection{Forventning}
Forventning er at efter 7-8 hjerner giver det ikke rigtig nogen
kvalitetsforskel.

\subsubsection{Faldgrupper}
Overfitting. 


\subsubsection{Resultat}

\subsection{Hvorfor 20-gaussians?}

\subsubsection{Fremgangsmåde}
Test på forskelligt antal gaussians og sammenlign resultaterne.

\subsubsection{Forventning}
Vi forventer, at kvaliteten falder under 20, men at metoden kræver mere tid
efter 20 uden betydelig forbedringer.

\subsubsection{Faldgrupper}
Overfitting. 

\subsubsection{Resultat}



